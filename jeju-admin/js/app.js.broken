const { useState, useEffect } = React;
const API_BASE = '/api-jeju-admin';

// AI 에이전트 상세 정보 (11개 - 광역 특화)
const AGENT_DETAILS = {
    "special_autonomy_agent": {
        title: "🏛️ 특별자치 Agent",
        subtitle: "자치권한 관리, 4·3평화재단 지원, 특별자치 입법",
        llm_info: "Claude Sonnet 4, 자치권한 전문 AI",
        performance: "자치입법 자동 검토, 4·3사업 98% 자동화",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                제주특별자치도만의 고유한 자치권한을 AI가 관리합니다.
                자치입법, 4·3평화재단 지원, 특별자치 행정을 자동화합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">⚡ 특별자치 권한</h3>
            <ul class="space-y-2 text-gray-300 mb-4">
                <li class="flex items-start gap-2">
                    <span class="text-cyan-400 mt-1">1.</span>
                    <span><strong>자치입법권:</strong> 도 조례 자동 검토 및 법령 충돌 분석</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-cyan-400 mt-1">2.</span>
                    <span><strong>자치행정권:</strong> 광역 행정 자율 운영</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-cyan-400 mt-1">3.</span>
                    <span><strong>자치재정권:</strong> 예산 편성 및 세제 자율권</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-cyan-400 mt-1">4.</span>
                    <span><strong>4·3평화재단:</strong> 피해자 지원 및 추념사업 자동화</span>
                </li>
            </ul>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">📊 관할 행정시 (2개)</h3>
            <div class="grid grid-cols-2 gap-3 mb-4">
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/20">
                    <div class="font-bold text-white mb-2">제주시</div>
                    <div class="text-sm text-gray-300">인구 50만, 19개 읍면동</div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/20">
                    <div class="font-bold text-white mb-2">서귀포시</div>
                    <div class="text-sm text-gray-300">인구 17만, 12개 읍면동</div>
                </div>
            </div>
        `,
        tech_stack: ["Claude Sonnet 4", "자치입법 AI", "법령 충돌 분석", "4·3 DB 연계", "OpenHash"]
    },
    "tourism_marketing_agent": {
        title: "🌏 관광마케팅 Agent",
        subtitle: "글로벌 관광 브랜드, 마케팅 캠페인, 관광 빅데이터 분석",
        llm_info: "GPT-4o, 다국어 마케팅 AI",
        performance: "10개 언어 실시간 캠페인, ROI 35% 증가",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                연간 1,500만 명의 관광객을 유치하기 위해 AI가 글로벌 마케팅을 자동화합니다.
                실시간 데이터 기반 캠페인 최적화로 관광 수익을 극대화합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">🎬 AI 캠페인 생성</h3>
            <div class="space-y-3 mb-4">
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/20">
                    <div class="font-bold text-white mb-2">타겟 시장 분석</div>
                    <div class="text-sm text-gray-300">
                        중국, 일본, 동남아, 미국 등 주요 시장별 트렌드 자동 분석
                    </div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/20">
                    <div class="font-bold text-white mb-2">콘텐츠 자동 생성</div>
                    <div class="text-sm text-gray-300">
                        GPT-4o 기반 10개 언어 동시 마케팅 콘텐츠 생성
                    </div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/20">
                    <div class="font-bold text-white mb-2">플랫폼 자동 배포</div>
                    <div class="text-sm text-gray-300">
                        YouTube, Instagram, 웨이보, 틱톡 등 글로벌 SNS 자동 업로드
                    </div>
                </div>
            </div>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">📊 관광 통계 (연간)</h3>
            <div class="bg-gradient-to-r from-green-900/30 to-emerald-900/30 rounded-lg p-4 border border-green-500/30">
                <div class="grid grid-cols-2 gap-4 text-center">
                    <div>
                        <div class="text-3xl font-bold text-green-400">1,500만</div>
                        <div class="text-sm text-gray-300 mt-1">관광객 목표</div>
                    </div>
                    <div>
                        <div class="text-3xl font-bold text-green-400">5조원</div>
                        <div class="text-sm text-gray-300 mt-1">관광 수입</div>
                    </div>
                </div>
            </div>
        `,
        tech_stack: ["GPT-4o", "다국어 번역 AI", "관광 빅데이터", "SNS 자동화", "OpenHash"]
    },
    "future_industry_agent": {
        title: "🚀 미래산업 Agent",
        subtitle: "우주항공산업, 수소경제, 디지털 전환 지원",
        llm_info: "산업 전문 AI, 지원금 자동 심사",
        performance: "지원금 처리 90% 단축, 스타트업 성장률 45%",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                제주의 미래를 이끌 우주항공, 수소, 디지털 산업에 AI가 자동으로 
                지원금을 심사하고 배분합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">🚀 3대 미래산업</h3>
            <div class="grid grid-cols-1 gap-3 mb-4">
                <div class="bg-gradient-to-r from-purple-900/30 to-blue-900/30 rounded-lg p-4 border border-purple-500/30">
                    <div class="font-bold text-white mb-2 text-lg">우주항공산업</div>
                    <div class="text-sm text-gray-300">
                        소형 위성 발사체, 우주관광, 항공 MRO (정비·수리·정비)
                    </div>
                    <div class="text-xs text-purple-400 mt-2">투자액: 연 500억원</div>
                </div>
                <div class="bg-gradient-to-r from-green-900/30 to-emerald-900/30 rounded-lg p-4 border border-green-500/30">
                    <div class="font-bold text-white mb-2 text-lg">수소경제</div>
                    <div class="text-sm text-gray-300">
                        그린수소 생산, 수소차 보급, 수소 발전소
                    </div>
                    <div class="text-xs text-green-400 mt-2">투자액: 연 800억원</div>
                </div>
                <div class="bg-gradient-to-r from-cyan-900/30 to-blue-900/30 rounded-lg p-4 border border-cyan-500/30">
                    <div class="font-bold text-white mb-2 text-lg">디지털 전환</div>
                    <div class="text-sm text-gray-300">
                        AI 스타트업, 빅데이터, 스마트시티
                    </div>
                    <div class="text-xs text-cyan-400 mt-2">투자액: 연 600억원</div>
                </div>
            </div>
        `,
        tech_stack: ["산업 AI", "지원금 심사 자동화", "예산 배분 알고리즘", "스타트업 DB", "OpenHash"]
    },
    "jobs_economy_agent": {
        title: "💼 일자리경제 Agent",
        subtitle: "도 단위 일자리 창출, 창업 지원, 통상 진흥",
        llm_info: "고용·경제 전문 AI",
        performance: "일자리 매칭률 88%, 창업 성공률 62%",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                제주도 전체의 일자리를 AI가 자동으로 매칭하고,
                창업을 원하는 청년에게 맞춤형 지원을 제공합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">📋 주요 사업</h3>
            <ul class="space-y-3 text-gray-300">
                <li class="bg-black/30 rounded-lg p-3 border border-cyan-500/20">
                    <div class="font-bold text-white mb-1">AI 일자리 매칭</div>
                    <div class="text-sm">구직자와 기업을 AI가 자동 매칭 (88% 성공률)</div>
                </li>
                <li class="bg-black/30 rounded-lg p-3 border border-cyan-500/20">
                    <div class="font-bold text-white mb-1">청년 창업 지원</div>
                    <div class="text-sm">사업계획서 자동 검토 및 멘토링</div>
                </li>
                <li class="bg-black/30 rounded-lg p-3 border border-cyan-500/20">
                    <div class="font-bold text-white mb-1">통상 진흥</div>
                    <div class="text-sm">해외 바이어 자동 매칭 및 수출 컨설팅</div>
                </li>
            </ul>
        `,
        tech_stack: ["매칭 AI", "창업 분석", "통상 빅데이터", "고용 예측 모델", "OpenHash"]
    },
    "health_welfare_agent": {
        title: "🏥 보건복지 Agent",
        subtitle: "광역 의료 체계, 복지 정책, 여성 권익",
        llm_info: "의료·복지 전문 AI",
        performance: "의료 접근성 95%, 복지 사각지대 85% 해소",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                제주도 67만 도민의 건강과 복지를 AI가 통합 관리합니다.
                광역 의료 체계를 구축하고 복지 사각지대를 해소합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">🏥 광역 의료 체계</h3>
            <div class="space-y-3 mb-4">
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/20">
                    <div class="font-bold text-white mb-2">권역 응급의료센터</div>
                    <div class="text-sm text-gray-300">
                        AI 기반 응급환자 이송 최적화 (제주대병원, 서귀포의료원)
                    </div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/20">
                    <div class="font-bold text-white mb-2">원격 진료</div>
                    <div class="text-sm text-gray-300">
                        도서지역 (추자도, 우도) AI 원격 진료 시스템
                    </div>
                </div>
            </div>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">💰 도 복지 예산 (연간)</h3>
            <div class="bg-gradient-to-r from-green-900/30 to-emerald-900/30 rounded-lg p-4 border border-green-500/30">
                <div class="text-3xl font-bold text-green-400 mb-2">약 1.2조원</div>
                <div class="text-gray-300">AI 자동 배분으로 집행률 98.2% 달성</div>
            </div>
        `,
        tech_stack: ["의료 AI", "복지 자격 심사", "응급 최적화", "원격 진료", "OpenHash"]
    },
    "environment_agent": {
        title: "🌿 환경보전 Agent",
        subtitle: "세계자연유산 관리, 환경 모니터링, 청정 에너지",
        llm_info: "환경 모니터링 AI, IoT 센서 통합",
        performance: "유네스코 평가 A등급, 청정도 유지율 99.5%",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                한라산, 성산일출봉, 거문오름 등 유네스코 세계자연유산을 
                AI가 24시간 실시간 모니터링하고 보전합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">🏔️ 세계자연유산 (3곳)</h3>
            <div class="space-y-3 mb-4">
                <div class="bg-gradient-to-r from-green-900/30 to-emerald-900/30 rounded-lg p-4 border border-green-500/30">
                    <div class="font-bold text-white mb-2">한라산 천연보호구역</div>
                    <div class="text-sm text-gray-300">
                        IoT 센서 1,200개로 실시간 모니터링
                    </div>
                </div>
                <div class="bg-gradient-to-r from-cyan-900/30 to-blue-900/30 rounded-lg p-4 border border-cyan-500/30">
                    <div class="font-bold text-white mb-2">성산일출봉</div>
                    <div class="text-sm text-gray-300">
                        침식 모니터링 및 관광객 입장 제어
                    </div>
                </div>
                <div class="bg-gradient-to-r from-purple-900/30 to-blue-900/30 rounded-lg p-4 border border-purple-500/30">
                    <div class="font-bold text-white mb-2">거문오름 용암동굴계</div>
                    <div class="text-sm text-gray-300">
                        지하수 수질 및 동굴 생태계 자동 관리
                    </div>
                </div>
            </div>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">🌱 청정 에너지</h3>
            <ul class="space-y-2 text-gray-300">
                <li class="flex items-center gap-2">
                    <span class="text-green-400">✓</span>
                    <span>풍력 발전 단지 (제주 전력의 17%)</span>
                </li>
                <li class="flex items-center gap-2">
                    <span class="text-green-400">✓</span>
                    <span>태양광 발전 확대 (가정·공공건물)</span>
                </li>
                <li class="flex items-center gap-2">
                    <span class="text-green-400">✓</span>
                    <span>전기차 보급률 전국 1위</span>
                </li>
            </ul>
        `,
        tech_stack: ["IoT 센서", "환경 빅데이터", "예측 AI", "실시간 알림", "OpenHash"]
    },
    "agriculture_agent": {
        title: "🐄 농축산 Agent",
        subtitle: "도 단위 농축산 정책, 친환경 농업, 6차 산업",
        llm_info: "농업 전문 AI, 스마트팜 연계",
        performance: "농가 소득 20% 증가, 친환경 인증 자동화",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                감귤, 축산, 친환경 농업 등 제주 1차 산업을 AI가 종합 지원합니다.
                6차 산업화를 통해 농가 소득을 극대화합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">🌾 주요 농축산물</h3>
            <div class="grid grid-cols-2 gap-3 mb-4">
                <div class="bg-black/30 rounded-lg p-4 border border-orange-500/30">
                    <div class="text-2xl mb-2">🍊</div>
                    <div class="font-bold text-white">감귤</div>
                    <div class="text-sm text-gray-300 mt-1">연 60만톤 생산</div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-green-500/30">
                    <div class="text-2xl mb-2">🥬</div>
                    <div class="font-bold text-white">친환경 채소</div>
                    <div class="text-sm text-gray-300 mt-1">무농약·유기농</div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/30">
                    <div class="text-2xl mb-2">🐴</div>
                    <div class="font-bold text-white">제주마</div>
                    <div class="text-sm text-gray-300 mt-1">승마 관광 연계</div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-purple-500/30">
                    <div class="text-2xl mb-2">🐖</div>
                    <div class="font-bold text-white">제주 흑돼지</div>
                    <div class="text-sm text-gray-300 mt-1">프리미엄 브랜드</div>
                </div>
            </div>
        `,
        tech_stack: ["스마트팜 AI", "친환경 인증 자동화", "6차 산업 컨설팅", "농업 빅데이터", "OpenHash"]
    },
    "marine_fishery_agent": {
        title: "🐟 해양수산 Agent",
        subtitle: "수산업 광역 관리, 어항 개발, 해양 레저",
        llm_info: "수산 전문 AI, 어장 예측",
        performance: "어업 소득 18% 증가, 자원 관리 최적화",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                제주 해안 전역의 수산업을 AI가 통합 관리합니다.
                어장 예측, 보조금 지급, 해양 레저까지 원스톱 지원합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">🎣 주요 수산업</h3>
            <ul class="space-y-3 text-gray-300">
                <li class="bg-black/30 rounded-lg p-3 border border-cyan-500/20">
                    <div class="font-bold text-white mb-1">근해 어업</div>
                    <div class="text-sm">갈치, 고등어, 방어 등 어장 AI 예측</div>
                </li>
                <li class="bg-black/30 rounded-lg p-3 border border-cyan-500/20">
                    <div class="font-bold text-white mb-1">양식업</div>
                    <div class="text-sm">전복, 해삼 스마트 양식 관리</div>
                </li>
                <li class="bg-black/30 rounded-lg p-3 border border-cyan-500/20">
                    <div class="font-bold text-white mb-1">해녀 문화</div>
                    <div class="text-sm">유네스코 인류무형문화유산 보존</div>
                </li>
            </ul>
        `,
        tech_stack: ["어장 예측 AI", "수산 빅데이터", "보조금 자동화", "해양 IoT", "OpenHash"]
    },
    "infrastructure_agent": {
        title: "🏗️ 인프라건설 Agent",
        subtitle: "도로/항만/공항 인프라, 제2공항, 광역 교통",
        llm_info: "건설 프로젝트 관리 AI",
        performance: "공정 관리 자동화, 예산 초과 방지 95%",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                제주 제2공항, 광역 도로망 등 대규모 인프라 프로젝트를
                AI가 실시간으로 관리하고 모니터링합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">🛫 주요 프로젝트</h3>
            <div class="space-y-3 mb-4">
                <div class="bg-gradient-to-r from-purple-900/30 to-blue-900/30 rounded-lg p-4 border border-purple-500/30">
                    <div class="font-bold text-white text-lg mb-2">제주 제2공항</div>
                    <div class="text-sm text-gray-300 mb-2">
                        성산읍 신산리 일대, 연간 2,500만명 수용
                    </div>
                    <div class="flex justify-between text-xs">
                        <span class="text-purple-400">예산: 4조 8천억원</span>
                        <span class="text-cyan-400">진척도: 15% (설계)</span>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-cyan-900/30 to-blue-900/30 rounded-lg p-4 border border-cyan-500/30">
                    <div class="font-bold text-white mb-2">제2항로 개발</div>
                    <div class="text-sm text-gray-300">
                        한림항 ↔ 목포항 신규 항로
                    </div>
                </div>
            </div>
        `,
        tech_stack: ["프로젝트 관리 AI", "예산 모니터링", "리스크 자동 탐지", "BIM 연계", "OpenHash"]
    },
    "pdv_agent": {
        title: "🔐 PDV관리 Agent",
        subtitle: "제주도민 프라이빗 데이터 금고 관리",
        llm_info: "AES-256 암호화 + Zero-Knowledge Proof",
        performance: "해킹 시도 0건, 개인정보 유출 0건",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                제주도 67만 도민의 모든 개인정보를 각자의 단말기에 암호화 저장합니다.
                제주도청은 해시값만 보유하며, 원본 데이터는 도민만 접근 가능합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">🔐 보안 체계</h3>
            <div class="space-y-3 mb-4">
                <div class="bg-black/30 rounded-lg p-4 border border-green-500/30">
                    <div class="font-bold text-green-400 mb-2">📱 로컬 저장</div>
                    <div class="text-sm text-gray-300">
                        원본 데이터는 도민의 스마트폰/PC에만 저장
                    </div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/30">
                    <div class="font-bold text-cyan-400 mb-2">⛓️ 오픈해시 기록</div>
                    <div class="text-sm text-gray-300">
                        SHA-256 해시값만 4계층에 분산 기록
                    </div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-red-500/30">
                    <div class="font-bold text-red-400 mb-2">🚫 제3자 접근 차단</div>
                    <div class="text-sm text-gray-300">
                        제주도청, 정부, 기업 모두 접근 불가
                    </div>
                </div>
            </div>
        `,
        tech_stack: ["AES-256", "Zero-Knowledge Proof", "생체 인증", "OpenHash", "GDPR 준수"]
    },
    "openhash_agent": {
        title: "⛓️ 오픈해시 Agent",
        subtitle: "계층 3(광역) 분산 해시 체인 기록 및 검증",
        llm_info: "SHA-256 재해싱 기반 확률적 계층 선택",
        performance: "TPS 무제한 확장, 에너지 98.5% 절감",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                제주특별자치도청은 오픈해시 4계층 구조에서 **계층 3(광역 계층)**에 속하며,
                전국 17개 광역시도 서버 중 하나로 작동합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">⛓️ 제주도청의 역할</h3>
            <div class="space-y-3 mb-4">
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/20">
                    <div class="font-bold text-white mb-2">상위 계층 연결</div>
                    <div class="text-sm text-gray-300">
                        • 행정안전부 (계층 4)
                    </div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/20">
                    <div class="font-bold text-white mb-2">하위 계층 관리</div>
                    <div class="text-sm text-gray-300">
                        • 제주시청 (계층 1)<br/>
                        • 서귀포시청 (계층 1)<br/>
                        • 전체 43개 읍면동 (계층 2) 통합 관리
                    </div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/20">
                    <div class="font-bold text-white mb-2">확률적 기록</div>
                    <div class="text-sm text-gray-300">
                        • 모든 거래의 25% 확률로 제주도청 서버에 기록<br/>
                        • SHA-256 재해싱으로 무작위성 보장
                    </div>
                </div>
            </div>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">📊 처리 성능</h3>
            <div class="grid grid-cols-2 gap-4">
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/30">
                    <div class="text-2xl font-bold text-green-400">무제한</div>
                    <div class="text-sm text-gray-400">TPS (초당 거래)</div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/30">
                    <div class="text-2xl font-bold text-green-400">98.5%</div>
                    <div class="text-sm text-gray-400">에너지 절감</div>
                </div>
            </div>
        `,
        tech_stack: ["SHA-256", "확률적 선택", "4계층 분산", "기존 인프라 활용", "선형 확장"]
    }
};

function Modal({ agent, onClose }) {
    if (!agent) return null;
    
    const detail = AGENT_DETAILS[agent.id];
    
    return React.createElement('div', { 
        className: 'fixed inset-0 z-50 flex items-center justify-center p-4',
        onClick: onClose
    },
        React.createElement('div', { className: 'absolute inset-0 bg-black/80 backdrop-blur-sm' }),
        React.createElement('div', { 
            className: 'relative bg-gradient-to-br from-slate-900 to-slate-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden border-2 border-cyan-500/30',
            onClick: (e) => e.stopPropagation()
        },
            React.createElement('div', { className: 'sticky top-0 bg-gradient-to-r from-cyan-900/50 to-blue-900/50 px-8 py-6 border-b border-cyan-500/30 backdrop-blur-sm' },
                React.createElement('div', { className: 'flex items-center justify-between' },
                    React.createElement('div', {},
                        React.createElement('h2', { className: 'text-3xl font-bold text-cyan-400 neon-text mb-2' }, detail.title),
                        React.createElement('p', { className: 'text-gray-300 text-lg' }, detail.subtitle),
                        React.createElement('div', { className: 'mt-3 flex gap-3' },
                            React.createElement('span', { className: 'px-3 py-1 bg-green-500/20 text-green-400 rounded-lg text-sm font-bold border border-green-500/30 flex items-center gap-1' },
                                '● Online'
                            ),
                            React.createElement('span', { className: 'px-3 py-1 bg-cyan-500/20 text-cyan-400 rounded-lg text-sm font-bold border border-cyan-500/30' },
                                detail.llm_info
                            )
                        )
                    ),
                    React.createElement('button', {
                        onClick: onClose,
                        className: 'text-gray-400 hover:text-white text-4xl font-bold transition-colors'
                    }, '×')
                )
            ),
            
            React.createElement('div', { className: 'overflow-y-auto max-h-[calc(90vh-180px)] px-8 py-6' },
                React.createElement('div', { 
                    className: 'prose prose-invert max-w-none',
                    dangerouslySetInnerHTML: { __html: detail.description }
                }),
                
                React.createElement('div', { className: 'mt-8 bg-black/30 rounded-xl p-6 border border-cyan-500/20' },
                    React.createElement('h3', { className: 'text-xl font-bold text-cyan-400 mb-4' }, '🛠️ 기술 스택'),
                    React.createElement('div', { className: 'flex flex-wrap gap-2' },
                        detail.tech_stack.map((tech, idx) =>
                            React.createElement('span', {
                                key: idx,
                                className: 'px-4 py-2 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 text-cyan-300 rounded-lg text-sm font-semibold border border-cyan-500/30'
                            }, tech)
                        )
                    )
                )
            ),
            
            React.createElement('div', { className: 'sticky bottom-0 bg-gradient-to-r from-cyan-900/50 to-blue-900/50 px-8 py-4 border-t border-cyan-500/30 backdrop-blur-sm flex justify-between items-center' },
                React.createElement('div', { className: 'text-gray-300 text-sm' },
                    React.createElement('span', { className: 'font-bold text-green-400' }, '⚡ 성능: '),
                    detail.performance
                ),
                React.createElement('button', {
                    onClick: onClose,
                    className: 'px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-cyan-500/50 transition-all'
                }, '닫기')
            )
        )
    );
}

function App() {
    const [systemInfo, setSystemInfo] = useState(null);
    const [services, setServices] = useState([]);
    const [agents, setAgents] = useState([]);
    const [activeTab, setActiveTab] = useState('overview');
    const [chatMessages, setChatMessages] = useState([]);
    const [inputMessage, setInputMessage] = useState('');
    const [loading, setLoading] = useState(false);
    const [simulating, setSimulating] = useState(false);
    const [simulationData, setSimulationData] = useState(null);
    const [simulationStep, setSimulationStep] = useState(0);
    const [selectedAgent, setSelectedAgent] = useState(null);

    useEffect(() => {
        fetchData();
    }, []);

    // URL 파라미터 읽기 (딥링크)
    useEffect(() => {
        const params = new URLSearchParams(window.location.search);
        const agentId = params.get('agent');
        if (agentId && agents && agents.length > 0) {
            const agent = agents.find(a => a.id === agentId);
            if (agent) {
                setSelectedAgent(agent);
                setActiveTab('agents'); // AI 탭으로 자동 전환
            }
        }
    }, [agents]);


    // Deep link: Read URL parameter and auto-open agent modal
    useEffect(() => {
        if (!agents || agents.length === 0) return;
        
        const params = new URLSearchParams(window.location.search);
        const agentId = params.get('agent');
        
        if (agentId) {
            const agent = agents.find(a => a.id === agentId);
            if (agent) {
                setSelectedAgent(agent);
                setActiveTab('agents');
            }
        }
    }, [agents]);

    const fetchData = async () => {
        try {
            const [infoRes, servicesRes, agentsRes] = await Promise.all([
                fetch(`${API_BASE}/info`),
                fetch(`${API_BASE}/services`),
                fetch(`${API_BASE}/agents`)
            ]);
            setSystemInfo(await infoRes.json());
            setServices((await servicesRes.json()).services);
            setAgents((await agentsRes.json()).agents);
        } catch (error) {
            console.error('Failed to load data:', error);
        }
    };

    // ... (나머지 함수들은 이미 있음)
}

ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
