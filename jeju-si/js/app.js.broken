const { useState, useEffect } = React;
const API_BASE = '/api-jeju-si';

// AI 에이전트 상세 정보
const AGENT_DETAILS = {
    "city_civil_agent": {
        title: "📄 시민민원 Agent",
        subtitle: "제주시 전체 민원 통합 처리 및 읍면동 자동 배정",
        llm_info: "Claude Sonnet 4, GPT-4 기반 민원 분류 AI",
        performance: "19개 읍면동 통합 관리, 자동 배정율 99.2%",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                제주시 전역에서 접수되는 모든 민원을 AI가 자동으로 분류하고, 관할 읍면동에 즉시 배정합니다.
                시민은 어떤 읍면동 소관인지 몰라도 제주시청에 접수하면 AI가 자동으로 처리합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">⚡ 처리 프로세스</h3>
            <ul class="space-y-2 text-gray-300 mb-4">
                <li class="flex items-start gap-2">
                    <span class="text-cyan-400 mt-1">1.</span>
                    <span><strong>민원 접수:</strong> 제주시청 통합 창구로 모든 민원 접수</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-cyan-400 mt-1">2.</span>
                    <span><strong>AI 분류:</strong> 민원 유형 자동 분석 (주민등록, 복지, 건축 등)</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-cyan-400 mt-1">3.</span>
                    <span><strong>읍면동 배정:</strong> PDV 주소 기반 관할 읍면동 자동 선택</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-cyan-400 mt-1">4.</span>
                    <span><strong>실시간 처리:</strong> 담당 읍면동 AI가 즉시 처리 시작</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-cyan-400 mt-1">5.</span>
                    <span><strong>통합 모니터링:</strong> 시청에서 전체 진행상황 실시간 확인</span>
                </li>
            </ul>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">📊 관할 읍면동 (19개)</h3>
            <div class="grid grid-cols-3 gap-2 mb-4">
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">용담1동</div>
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">용담2동</div>
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">건입동</div>
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">화북동</div>
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">삼도1동</div>
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">삼도2동</div>
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">용담동</div>
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">이도1동</div>
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">이도2동</div>
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">일도1동</div>
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">일도2동</div>
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">한림읍</div>
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">애월읍</div>
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">구좌읍</div>
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">조천읍</div>
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">한경면</div>
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">추자면</div>
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">우도면</div>
                <div class="bg-black/30 rounded-lg p-2 border border-cyan-500/20 text-gray-300 text-sm">연동</div>
            </div>
        `,
        tech_stack: ["Claude Sonnet 4", "GPT-4", "민원 분류 AI", "주소 기반 자동 배정", "OpenHash 통합"]
    },
    "certificate_agent": {
        title: "📋 증명발급 Agent",
        subtitle: "제주시 통합 증명서 자동 발급 시스템",
        llm_info: "LLaMA 3 Fine-tuning, PDF 생성 AI",
        performance: "30초 내 발급, 위조 탐지율 100%",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                제주시 전체 주민의 증명서를 통합 발급합니다. 
                읍면동 방문 없이 제주시청 홈페이지에서 모든 증명서 발급이 가능합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">📋 발급 가능 증명서</h3>
            <div class="grid grid-cols-2 gap-3 mb-4">
                <div class="bg-black/30 rounded-lg p-3 border border-cyan-500/20">
                    <div class="font-bold text-white">주민등록등본/초본</div>
                    <div class="text-xs text-gray-400 mt-1">전체 19개 읍면동 통합 발급</div>
                </div>
                <div class="bg-black/30 rounded-lg p-3 border border-cyan-500/20">
                    <div class="font-bold text-white">인감증명서</div>
                    <div class="text-xs text-gray-400 mt-1">실시간 인감 조회</div>
                </div>
                <div class="bg-black/30 rounded-lg p-3 border border-cyan-500/20">
                    <div class="font-bold text-white">지방세 납세증명</div>
                    <div class="text-xs text-gray-400 mt-1">제주시세 완납 증명</div>
                </div>
                <div class="bg-black/30 rounded-lg p-3 border border-cyan-500/20">
                    <div class="font-bold text-white">건축물대장</div>
                    <div class="text-xs text-gray-400 mt-1">제주시 전역 건물 정보</div>
                </div>
            </div>
        `,
        tech_stack: ["LLaMA 3", "PDF 디지털 서명", "QR 인증", "통합 DB 조회", "OpenHash"]
    },
    "welfare_agent": {
        title: "🏠 복지서비스 Agent",
        subtitle: "제주시 통합 복지 서비스 자동 심사 및 지원",
        llm_info: "GPT-4o 복지 전문 모델",
        performance: "시 단위 복지 통합 관리, 사각지대 92% 해소",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                제주시 전체 복지 예산을 AI가 자동으로 배분하고, 수급 자격자를 발굴하여 
                자동 신청까지 지원합니다. 19개 읍면동의 복지 데이터를 통합 분석합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">💰 제주시 복지 예산 (연간)</h3>
            <div class="bg-gradient-to-r from-green-900/30 to-emerald-900/30 rounded-lg p-4 border border-green-500/30 mb-4">
                <div class="text-3xl font-bold text-green-400 mb-2">약 3,500억 원</div>
                <div class="text-gray-300">AI 자동 배분으로 집행률 98.7% 달성</div>
            </div>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">🏥 주요 복지 사업</h3>
            <ul class="space-y-2 text-gray-300">
                <li class="flex items-center gap-2">
                    <span class="text-green-400">✓</span>
                    <span>기초생활보장 (생계·의료·주거·교육급여)</span>
                </li>
                <li class="flex items-center gap-2">
                    <span class="text-green-400">✓</span>
                    <span>노인 복지 (기초연금, 장기요양)</span>
                </li>
                <li class="flex items-center gap-2">
                    <span class="text-green-400">✓</span>
                    <span>장애인 복지 (활동지원, 보조기기)</span>
                </li>
                <li class="flex items-center gap-2">
                    <span class="text-green-400">✓</span>
                    <span>아동 복지 (아동수당, 양육수당)</span>
                </li>
            </ul>
        `,
        tech_stack: ["GPT-4o", "복지 자격 AI", "자동 신청 시스템", "예산 배분 알고리즘", "OpenHash"]
    },
    "tax_agent": {
        title: "💰 시세처리 Agent",
        subtitle: "재산세, 자동차세 등 지방세 자동 부과/징수",
        llm_info: "세무 전문 Fine-tuning 모델",
        performance: "처리 시간 85% 단축, 과세 오류 0%",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                제주시 전체 50만 시민의 지방세를 AI가 자동으로 계산하고 부과합니다.
                확장 재무제표를 통해 모든 세금 거래가 투명하게 기록됩니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">📋 처리 세목</h3>
            <div class="grid grid-cols-2 gap-3 mb-4">
                <div class="bg-black/30 rounded-lg p-3 border border-cyan-500/20">
                    <div class="font-bold text-white">재산세</div>
                    <div class="text-sm text-gray-300 mt-1">토지, 건물, 주택</div>
                    <div class="text-xs text-cyan-400 mt-2">연 2회 자동 부과</div>
                </div>
                <div class="bg-black/30 rounded-lg p-3 border border-cyan-500/20">
                    <div class="font-bold text-white">자동차세</div>
                    <div class="text-sm text-gray-300 mt-1">승용차, 화물차</div>
                    <div class="text-xs text-cyan-400 mt-2">연 2회 자동 부과</div>
                </div>
                <div class="bg-black/30 rounded-lg p-3 border border-cyan-500/20">
                    <div class="font-bold text-white">주민세</div>
                    <div class="text-sm text-gray-300 mt-1">개인분, 사업소분</div>
                    <div class="text-xs text-cyan-400 mt-2">연 1회 자동 부과</div>
                </div>
                <div class="bg-black/30 rounded-lg p-3 border border-cyan-500/20">
                    <div class="font-bold text-white">지방소득세</div>
                    <div class="text-sm text-gray-300 mt-1">종합소득, 양도소득</div>
                    <div class="text-xs text-cyan-400 mt-2">국세청 연계 자동</div>
                </div>
            </div>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">💳 확장 재무제표</h3>
            <p class="text-gray-300 mb-3 text-sm">
                모든 납세자와 제주시청의 재무제표가 실시간으로 갱신되어 
                세금 거래의 투명성을 보장합니다.
            </p>
        `,
        tech_stack: ["세무 AI", "확장 재무제표", "복식부기 자동화", "국세청 연계", "OpenHash"]
    },
    "citrus_fishery_agent": {
        title: "🍊 감귤수산 Agent",
        subtitle: "제주 감귤 유통 및 수산업 AI 컨설팅",
        llm_info: "농수산 전문 AI, 시세 예측 모델",
        performance: "농가 소득 15% 증가, 유통비용 20% 절감",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                제주의 대표 산업인 감귤 재배와 수산업을 AI가 종합 지원합니다.
                시세 예측, 유통 최적화, 보조금 자동 신청까지 원스톱 서비스를 제공합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">🍊 감귤 산업 지원</h3>
            <div class="space-y-3 mb-4">
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/20">
                    <div class="font-bold text-white mb-2">실시간 시세 분석</div>
                    <div class="text-sm text-gray-300">
                        전국 도매시장 감귤 가격을 AI가 실시간 분석하여 
                        최적 출하 시기를 농가에 자동 알림
                    </div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/20">
                    <div class="font-bold text-white mb-2">유통 경로 최적화</div>
                    <div class="text-sm text-gray-300">
                        생산지에서 소비지까지 최단 경로 계산,
                        물류비 20% 절감
                    </div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/20">
                    <div class="font-bold text-white mb-2">보조금 자동 신청</div>
                    <div class="text-sm text-gray-300">
                        친환경 농자재, 스마트팜 지원금 등 
                        농가 자격 자동 판단 및 신청 대행
                    </div>
                </div>
            </div>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">🐟 수산업 지원</h3>
            <ul class="space-y-2 text-gray-300">
                <li class="flex items-center gap-2">
                    <span class="text-cyan-400">▸</span>
                    <span>어선 유류비 보조금 자동 신청</span>
                </li>
                <li class="flex items-center gap-2">
                    <span class="text-cyan-400">▸</span>
                    <span>수산물 위판장 실시간 가격 정보</span>
                </li>
                <li class="flex items-center gap-2">
                    <span class="text-cyan-400">▸</span>
                    <span>어업 허가 및 신고 간소화</span>
                </li>
            </ul>
        `,
        tech_stack: ["시세 예측 AI", "유통 최적화 알고리즘", "보조금 자동 신청", "농수산 빅데이터", "OpenHash"]
    },
    "tourism_agent": {
        title: "🌴 관광진흥 Agent",
        subtitle: "제주 관광 정보 제공 및 관광객 응대 AI",
        llm_info: "Claude Sonnet 4 관광 전문 모델",
        performance: "24시간 다국어 지원, 만족도 94%",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                연간 1,500만 명의 제주 관광객에게 AI가 24시간 관광 정보를 제공합니다.
                한국어, 영어, 중국어, 일본어 등 다국어 실시간 통역이 가능합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">🗺️ 제공 서비스</h3>
            <div class="grid grid-cols-2 gap-3 mb-4">
                <div class="bg-black/30 rounded-lg p-3 border border-cyan-500/20">
                    <div class="text-2xl mb-2">🏖️</div>
                    <div class="font-bold text-white">관광지 추천</div>
                    <div class="text-xs text-gray-400 mt-1">AI 맞춤형 코스 제공</div>
                </div>
                <div class="bg-black/30 rounded-lg p-3 border border-cyan-500/20">
                    <div class="text-2xl mb-2">🍽️</div>
                    <div class="font-bold text-white">맛집 정보</div>
                    <div class="text-xs text-gray-400 mt-1">리뷰 기반 추천</div>
                </div>
                <div class="bg-black/30 rounded-lg p-3 border border-cyan-500/20">
                    <div class="text-2xl mb-2">🏨</div>
                    <div class="font-bold text-white">숙박 예약</div>
                    <div class="text-xs text-gray-400 mt-1">실시간 가격 비교</div>
                </div>
                <div class="bg-black/30 rounded-lg p-3 border border-cyan-500/20">
                    <div class="text-2xl mb-2">🚗</div>
                    <div class="font-bold text-white">교통 안내</div>
                    <div class="text-xs text-gray-400 mt-1">렌터카, 버스 정보</div>
                </div>
            </div>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">🌏 다국어 지원</h3>
            <div class="flex flex-wrap gap-2">
                <span class="px-3 py-1 bg-cyan-500/20 text-cyan-400 rounded-lg text-sm border border-cyan-500/30">한국어</span>
                <span class="px-3 py-1 bg-cyan-500/20 text-cyan-400 rounded-lg text-sm border border-cyan-500/30">English</span>
                <span class="px-3 py-1 bg-cyan-500/20 text-cyan-400 rounded-lg text-sm border border-cyan-500/30">中文</span>
                <span class="px-3 py-1 bg-cyan-500/20 text-cyan-400 rounded-lg text-sm border border-cyan-500/30">日本語</span>
            </div>
        `,
        tech_stack: ["Claude Sonnet 4", "다국어 번역", "관광 빅데이터", "실시간 예약 시스템", "OpenHash"]
    },
    "call_center_agent": {
        title: "📞 120콜센터 Agent",
        subtitle: "24시간 무중단 시민 상담 및 민원 접수",
        llm_info: "Claude Sonnet 4 대화형 AI",
        performance: "응답시간 1초, 해결율 89%",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                제주시 120 콜센터를 AI가 완전 자동화하여 24시간 365일 
                시민 상담과 민원 접수를 처리합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">📋 상담 분야</h3>
            <div class="space-y-2 text-gray-300">
                <div class="flex items-center gap-2">
                    <span class="text-green-400">✓</span>
                    <span>민원 접수 및 처리 현황 조회</span>
                </div>
                <div class="flex items-center gap-2">
                    <span class="text-green-400">✓</span>
                    <span>복지 서비스 안내 및 신청</span>
                </div>
                <div class="flex items-center gap-2">
                    <span class="text-green-400">✓</span>
                    <span>세금 납부 안내 및 분할 납부 상담</span>
                </div>
                <div class="flex items-center gap-2">
                    <span class="text-green-400">✓</span>
                    <span>관광 정보 및 교통 안내</span>
                </div>
                <div class="flex items-center gap-2">
                    <span class="text-green-400">✓</span>
                    <span>불편사항 신고 (도로, 환경, 안전)</span>
                </div>
            </div>
        `,
        tech_stack: ["Claude Sonnet 4", "음성 인식", "자연어 처리", "실시간 DB 조회", "OpenHash"]
    },
    "pdv_agent": {
        title: "🔐 PDV관리 Agent",
        subtitle: "제주시민 프라이빗 데이터 금고 관리",
        llm_info: "AES-256 암호화 + Zero-Knowledge Proof",
        performance: "해킹 시도 0건, 개인정보 유출 0건",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                제주시 50만 시민의 모든 개인정보를 각자의 단말기에 암호화 저장합니다.
                제주시청은 해시값만 보유하며, 원본 데이터는 시민만 접근 가능합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">🔐 보안 체계</h3>
            <div class="space-y-3 mb-4">
                <div class="bg-black/30 rounded-lg p-4 border border-green-500/30">
                    <div class="font-bold text-green-400 mb-2">📱 로컬 저장</div>
                    <div class="text-sm text-gray-300">
                        원본 데이터는 시민의 스마트폰/PC에만 저장
                    </div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/30">
                    <div class="font-bold text-cyan-400 mb-2">⛓️ 오픈해시 기록</div>
                    <div class="text-sm text-gray-300">
                        SHA-256 해시값만 4계층에 분산 기록
                    </div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-red-500/30">
                    <div class="font-bold text-red-400 mb-2">🚫 제3자 접근 차단</div>
                    <div class="text-sm text-gray-300">
                        제주시청, 정부, 기업 모두 접근 불가
                    </div>
                </div>
            </div>
        `,
        tech_stack: ["AES-256", "Zero-Knowledge Proof", "생체 인증", "OpenHash", "GDPR 준수"]
    },
    "openhash_agent": {
        title: "⛓️ 오픈해시 Agent",
        subtitle: "계층 1(시군구) 분산 해시 체인 기록 및 검증",
        llm_info: "SHA-256 재해싱 기반 확률적 계층 선택",
        performance: "TPS 무제한 확장, 에너지 98.5% 절감",
        description: `
            <h3 class="text-xl font-bold text-cyan-400 mb-4">🎯 핵심 기능</h3>
            <p class="text-gray-300 mb-4">
                제주시청은 오픈해시 4계층 구조에서 **계층 1(시군구 계층)**에 속하며,
                전국 226개 시군구 서버 중 하나로 작동합니다.
            </p>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">⛓️ 제주시청의 역할</h3>
            <div class="space-y-3 mb-4">
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/20">
                    <div class="font-bold text-white mb-2">상위 계층 연결</div>
                    <div class="text-sm text-gray-300">
                        • 제주특별자치도청 (계층 3)<br/>
                        • 행정안전부 (계층 4)
                    </div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/20">
                    <div class="font-bold text-white mb-2">하위 계층 관리</div>
                    <div class="text-sm text-gray-300">
                        • 19개 읍면동 서버 (계층 2) 통합 관리
                    </div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/20">
                    <div class="font-bold text-white mb-2">확률적 기록</div>
                    <div class="text-sm text-gray-300">
                        • 모든 거래의 25% 확률로 제주시청 서버에 기록<br/>
                        • SHA-256 재해싱으로 무작위성 보장
                    </div>
                </div>
            </div>
            
            <h3 class="text-xl font-bold text-cyan-400 mb-3 mt-6">📊 처리 성능</h3>
            <div class="grid grid-cols-2 gap-4">
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/30">
                    <div class="text-2xl font-bold text-green-400">무제한</div>
                    <div class="text-sm text-gray-400">TPS (초당 거래)</div>
                </div>
                <div class="bg-black/30 rounded-lg p-4 border border-cyan-500/30">
                    <div class="text-2xl font-bold text-green-400">98.5%</div>
                    <div class="text-sm text-gray-400">에너지 절감</div>
                </div>
            </div>
        `,
        tech_stack: ["SHA-256", "확률적 선택", "4계층 분산", "기존 인프라 활용", "선형 확장"]
    }
};

function Modal({ agent, onClose }) {
    if (!agent) return null;
    
    const detail = AGENT_DETAILS[agent.id];
    
    return React.createElement('div', { 
        className: 'fixed inset-0 z-50 flex items-center justify-center p-4',
        onClick: onClose
    },
        React.createElement('div', { className: 'absolute inset-0 bg-black/80 backdrop-blur-sm' }),
        React.createElement('div', { 
            className: 'relative bg-gradient-to-br from-slate-900 to-slate-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden border-2 border-cyan-500/30',
            onClick: (e) => e.stopPropagation()
        },
            React.createElement('div', { className: 'sticky top-0 bg-gradient-to-r from-cyan-900/50 to-blue-900/50 px-8 py-6 border-b border-cyan-500/30 backdrop-blur-sm' },
                React.createElement('div', { className: 'flex items-center justify-between' },
                    React.createElement('div', {},
                        React.createElement('h2', { className: 'text-3xl font-bold text-cyan-400 neon-text mb-2' }, detail.title),
                        React.createElement('p', { className: 'text-gray-300 text-lg' }, detail.subtitle),
                        React.createElement('div', { className: 'mt-3 flex gap-3' },
                            React.createElement('span', { className: 'px-3 py-1 bg-green-500/20 text-green-400 rounded-lg text-sm font-bold border border-green-500/30 flex items-center gap-1' },
                                '● Online'
                            ),
                            React.createElement('span', { className: 'px-3 py-1 bg-cyan-500/20 text-cyan-400 rounded-lg text-sm font-bold border border-cyan-500/30' },
                                detail.llm_info
                            )
                        )
                    ),
                    React.createElement('button', {
                        onClick: onClose,
                        className: 'text-gray-400 hover:text-white text-4xl font-bold transition-colors'
                    }, '×')
                )
            ),
            
            React.createElement('div', { className: 'overflow-y-auto max-h-[calc(90vh-180px)] px-8 py-6' },
                React.createElement('div', { 
                    className: 'prose prose-invert max-w-none',
                    dangerouslySetInnerHTML: { __html: detail.description }
                }),
                
                React.createElement('div', { className: 'mt-8 bg-black/30 rounded-xl p-6 border border-cyan-500/20' },
                    React.createElement('h3', { className: 'text-xl font-bold text-cyan-400 mb-4' }, '🛠️ 기술 스택'),
                    React.createElement('div', { className: 'flex flex-wrap gap-2' },
                        detail.tech_stack.map((tech, idx) =>
                            React.createElement('span', {
                                key: idx,
                                className: 'px-4 py-2 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 text-cyan-300 rounded-lg text-sm font-semibold border border-cyan-500/30'
                            }, tech)
                        )
                    )
                )
            ),
            
            React.createElement('div', { className: 'sticky bottom-0 bg-gradient-to-r from-cyan-900/50 to-blue-900/50 px-8 py-4 border-t border-cyan-500/30 backdrop-blur-sm flex justify-between items-center' },
                React.createElement('div', { className: 'text-gray-300 text-sm' },
                    React.createElement('span', { className: 'font-bold text-green-400' }, '⚡ 성능: '),
                    detail.performance
                ),
                React.createElement('button', {
                    onClick: onClose,
                    className: 'px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-cyan-500/50 transition-all'
                }, '닫기')
            )
        )
    );
}

function App() {
    const [systemInfo, setSystemInfo] = useState(null);
    const [services, setServices] = useState([]);
    const [agents, setAgents] = useState([]);
    const [activeTab, setActiveTab] = useState('overview');
    const [chatMessages, setChatMessages] = useState([]);
    const [inputMessage, setInputMessage] = useState('');
    const [loading, setLoading] = useState(false);
    const [simulating, setSimulating] = useState(false);
    const [simulationData, setSimulationData] = useState(null);
    const [simulationStep, setSimulationStep] = useState(0);
    const [selectedAgent, setSelectedAgent] = useState(null);

    useEffect(() => {
        fetchData();
    }, []);

    // URL 파라미터 읽기 (딥링크)
    useEffect(() => {
        const params = new URLSearchParams(window.location.search);
        const agentId = params.get('agent');
        if (agentId && agents && agents.length > 0) {
            const agent = agents.find(a => a.id === agentId);
            if (agent) {
                setSelectedAgent(agent);
                setActiveTab('agents'); // AI 탭으로 자동 전환
            }
        }
    }, [agents]);

    // Deep link: Read URL parameter and auto-open agent modal
    useEffect(() => {
        if (!agents || agents.length === 0) return;
        
        const params = new URLSearchParams(window.location.search);
        const agentId = params.get('agent');
        
        if (agentId) {
            const agent = agents.find(a => a.id === agentId);
            if (agent) {
                setSelectedAgent(agent);
                setActiveTab('agents');
            }
        }
    }, [agents]);

    const fetchData = async () => {
        try {
            const [infoRes, servicesRes, agentsRes] = await Promise.all([
                fetch(`${API_BASE}/info`),
                fetch(`${API_BASE}/services`),
                fetch(`${API_BASE}/agents`)
            ]);
            setSystemInfo(await infoRes.json());
            setServices((await servicesRes.json()).services);
            setAgents((await agentsRes.json()).agents);
        } catch (error) {
            console.error('Failed to load data:', error);
        }
    };
