<style>
    .ai-site-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 2rem;
    }
    
    .ai-site-header {
        background: white;
        border: 2px solid #0B4DA2;
        padding: 2rem;
        margin-bottom: 2rem;
    }
    
    .ai-site-header h1 {
        color: #000000;
        margin: 0 0 0.5rem 0;
        font-size: 28px;
        font-weight: 700;
    }
    
    .ai-site-header p {
        color: #4B5563;
        margin: 0;
        font-size: 14px;
    }
    
    .info-panel {
        background: #F0F4F8;
        border-left: 4px solid #0B4DA2;
        padding: 24px;
        margin: 2rem 0;
        line-height: 1.8;
    }
    
    .info-panel p {
        margin-bottom: 16px;
        color: #1F2937;
        font-size: 14px;
    }
    
    .info-panel p:last-child {
        margin-bottom: 0;
    }
    
    .search-section {
        background: white;
        padding: 2rem;
        margin: 2rem 0;
        border: 2px solid #E5E7EB;
    }
    
    .search-section h2 {
        color: #1F2937;
        font-size: 20px;
        font-weight: 700;
        margin-bottom: 1rem;
    }
    
    .search-input {
        width: 100%;
        padding: 0.75rem;
        border: 2px solid #E5E7EB;
        font-size: 14px;
        margin-bottom: 1rem;
    }
    
    .search-input:focus {
        outline: none;
        border-color: #0B4DA2;
    }
    
    .btn-primary {
        background: #0B4DA2;
        color: white;
        padding: 0.75rem 2rem;
        border: none;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.2s;
        margin-right: 0.5rem;
    }
    
    .btn-primary:hover {
        background: #003876;
    }
    
    .loading {
        text-align: center;
        padding: 2rem;
        color: #6B7280;
        font-size: 14px;
    }
    
    .sites-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1.5rem;
        margin: 2rem 0;
    }
    
    .site-card {
        background: white;
        border: 2px solid #E5E7EB;
        padding: 1.5rem;
        transition: all 0.2s;
    }
    
    .site-card:hover {
        border-color: #0B4DA2;
        box-shadow: 0 4px 12px rgba(11, 77, 162, 0.1);
    }
    
    .site-card-title {
        font-size: 18px;
        font-weight: 700;
        color: #1F2937;
        margin-bottom: 0.5rem;
    }
    
    .site-card-info {
        font-size: 14px;
        color: #6B7280;
        margin: 0.25rem 0;
    }
    
    .site-card-actions {
        margin-top: 1rem;
        display: flex;
        gap: 0.5rem;
    }
    
    .btn-small {
        padding: 0.5rem 1rem;
        font-size: 13px;
        border: none;
        cursor: pointer;
        font-weight: 600;
    }
    
    .btn-view {
        background: #0B4DA2;
        color: white;
    }
    
    .btn-delete {
        background: #DC2626;
        color: white;
    }
</style>

<div class="ai-site-container">
    <div class="ai-site-header">
        <h1>ğŸŒ AI ì‚¬ì´íŠ¸</h1>
        <p>ëª¨ë“  ì›¹ì‚¬ì´íŠ¸ë¥¼ í•˜ë‚˜ì˜ AI ì‚¬ì´íŠ¸ë¡œ í†µí•©í•©ë‹ˆë‹¤</p>
    </div>
    
    <div class="info-panel">
        <p><strong>ì œì£¼ë„ì—ëŠ” ì œì£¼í•­ê³µ, ì œì£¼ ê°ê·¤, ì œì£¼ëŒ€í•™êµ, ì œì£¼ëŒ€í•™ë³‘ì›, ì œì£¼ì§€ë°©ë²•ì›, ì œì£¼ë„ì²­, ì‚¼ì¼ê³µì‚¬, ë‹¤ì‚¬ë‘ íšŸì§‘, ë†í˜‘, ì œì£¼ì€í–‰ ë“± 10ë§Œ ì—¬ ê°œì˜ ë‹¤ì–‘í•œ ì›¹ì‚¬ì´íŠ¸ë“¤ì´ ìˆìŠµë‹ˆë‹¤.</strong></p>
        
        <p>ê·€í•˜ê°€ <strong>ë„ì²­ì— ìš©ë¬´ê°€ ìˆê±°ë‚˜, ì€í–‰ ê³„ì¢Œì—ì„œ ëˆ„êµ°ê°€ì—ê²Œ ì†¡ê¸ˆí•˜ê±°ë‚˜, í•­ê³µê¶Œì„ êµ¬ë§¤í•˜ê±°ë‚˜, ì—¬íƒ€ ìƒí’ˆì„ êµ¬ë§¤</strong>í•  ë•Œ, ê·€í•˜ëŠ” í•´ë‹¹ ê¸°ê´€ì´ë‚˜ ê¸°ì—…ì˜ ì‚¬ì´íŠ¸ë¥¼ ë°©ë¬¸í•˜ê±°ë‚˜, ì•±ì„ ì´ìš©í•´ì•¼ í•©ë‹ˆë‹¤.</p>
        
        <p><strong>ì´ í˜ì´ì§€ëŠ” ì´ ëª¨ë“  ì›¹ì‚¬ì´íŠ¸ë“¤ì„ í•˜ë‚˜ì˜ AI ì‚¬ì´íŠ¸ë¡œ í†µí•©í•©ë‹ˆë‹¤.</strong> AI ì‚¬ì´íŠ¸ëŠ” ê·€í•˜ê°€ ì›í•˜ëŠ” ì •ë³´ë‚˜ ì—…ë¬´ ìˆ˜í–‰ì„ AI ìƒë‹´ì›ì´ ëŒ€í–‰í•©ë‹ˆë‹¤.</p>
    </div>
    
    <div class="search-section">
        <h2>ğŸ” AI ì‚¬ì´íŠ¸ ê²€ìƒ‰</h2>
        <input type="text" class="search-input" id="siteSearchInput" placeholder="ìƒí˜¸ëª…, ì„±ëª…, ê³ ìœ ë²ˆí˜¸, ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰í•˜ì„¸ìš”" />
        <button class="btn-primary" onclick="searchAISite()">ê²€ìƒ‰</button>
    </div>
    
    <div style="text-align: center; margin: 2rem 0;">
        <button class="btn-primary" onclick="showMySites()">ğŸ“‹ ë‚´ ì‚¬ì´íŠ¸ ëª©ë¡</button>
        <button class="btn-primary" onclick="loadGeneratorModule()">â• ìƒˆ ì‚¬ì´íŠ¸ ë§Œë“¤ê¸°</button>
    </div>
    
    <div id="sitesList" style="display: none; margin: 2rem 0;"></div>
    
    <div id="generatorModule"></div>
    <div id="previewModule"></div>
</div>

<script>
(function() {
    // ì‚¬ì´íŠ¸ ìƒì„± ëª¨ë“ˆ ë¡œë“œ
    window.loadGeneratorModule = async function() {
        const container = document.getElementById('generatorModule');
        container.innerHTML = '<div class="loading">ì‚¬ì´íŠ¸ ìƒì„± AIë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>';
        
        try {
            const response = await fetch('contents/modules/site-generator.html');
            if (!response.ok) throw new Error('ëª¨ë“ˆ ë¡œë“œ ì‹¤íŒ¨');
            
            const html = await response.text();
            container.innerHTML = html;
            
            const scripts = container.querySelectorAll('script');
            scripts.forEach(script => {
                const newScript = document.createElement('script');
                newScript.textContent = script.textContent;
                document.body.appendChild(newScript);
                script.remove();
            });
        } catch (error) {
            console.error('ëª¨ë“ˆ ë¡œë“œ ì˜¤ë¥˜:', error);
            container.innerHTML = '<div class="loading" style="color: #DC2626;">ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</div>';
        }
    };

    // ì‚¬ì´íŠ¸ ê²€ìƒ‰
    window.searchAISite = function() {
        const query = document.getElementById('siteSearchInput').value.trim();
        if (!query) {
            alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
            return;
        }
        
        const sites = JSON.parse(localStorage.getItem('aiSites') || '[]');
        const found = sites.find(site => 
            site.businessName?.includes(query) ||
            site.ownerName?.includes(query) ||
            site.businessNumber === query ||
            site.phone === query
        );
        
        if (found) {
            window.loadSitePreview(found);
        } else {
            alert('ê²€ìƒ‰ëœ ì‚¬ì´íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.');
        }
    };

    // ì‚¬ì´íŠ¸ í”„ë¦¬ë·° ë¡œë“œ
    window.loadSitePreview = async function(siteData) {
        const container = document.getElementById('previewModule');
        container.innerHTML = '<div class="loading">ì‚¬ì´íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ì¤‘...</div>';
        
        try {
            const response = await fetch('contents/modules/site-preview.html');
            if (!response.ok) throw new Error('í”„ë¦¬ë·° ëª¨ë“ˆ ë¡œë“œ ì‹¤íŒ¨');
            
            const html = await response.text();
            container.innerHTML = html;
            
            const scripts = container.querySelectorAll('script');
            scripts.forEach(script => {
                const newScript = document.createElement('script');
                newScript.textContent = script.textContent;
                document.body.appendChild(newScript);
                script.remove();
            });
            
            setTimeout(() => {
                if (window.renderSitePreview) {
                    window.renderSitePreview(siteData);
                }
            }, 100);
        } catch (error) {
            console.error('í”„ë¦¬ë·° ë¡œë“œ ì˜¤ë¥˜:', error);
            container.innerHTML = '<div class="loading" style="color: #DC2626;">í”„ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</div>';
        }
    };
    
    // ë‚´ ì‚¬ì´íŠ¸ ëª©ë¡ í‘œì‹œ
    window.showMySites = function() {
        const container = document.getElementById('sitesList');
        const sites = JSON.parse(localStorage.getItem('aiSites') || '[]');
        
        if (sites.length === 0) {
            container.innerHTML = '<div style="text-align:center;padding:2rem;color:#6B7280;">ì €ì¥ëœ ì‚¬ì´íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
            container.style.display = 'block';
            return;
        }
        
        const grid = sites.map((site, index) => `
            <div class="site-card">
                <div class="site-card-title">${site.businessName || 'ì´ë¦„ ì—†ìŒ'}</div>
                <div class="site-card-info">ğŸ“ ${site.address || 'ì£¼ì†Œ ì—†ìŒ'}</div>
                <div class="site-card-info">ğŸ“ ${site.phone || 'ì—°ë½ì²˜ ì—†ìŒ'}</div>
                <div class="site-card-info">ğŸ·ï¸ ${getIndustryText(site.industry) || 'ì—…ì¢… ì—†ìŒ'}</div>
                <div class="site-card-info">ğŸ“… ${new Date(site.createdAt).toLocaleDateString('ko-KR')}</div>
                <div class="site-card-actions">
                    <button class="btn-small btn-view" onclick="viewSite(${index})">ë³´ê¸°</button>
                    <button class="btn-small btn-delete" onclick="deleteSite(${index})">ì‚­ì œ</button>
                </div>
            </div>
        `).join('');
        
        container.innerHTML = `
            <h2 style="font-size:20px;font-weight:700;margin-bottom:1rem;">ë‚´ ì‚¬ì´íŠ¸ ëª©ë¡ (${sites.length}ê°œ)</h2>
            <div class="sites-grid">${grid}</div>
        `;
        container.style.display = 'block';
        container.scrollIntoView({ behavior: 'smooth' });
    };
    
    // ì‚¬ì´íŠ¸ ë³´ê¸°
    window.viewSite = function(index) {
        const sites = JSON.parse(localStorage.getItem('aiSites') || '[]');
        if (sites[index]) {
            window.loadSitePreview(sites[index]);
        }
    };
    
    // ì‚¬ì´íŠ¸ ì‚­ì œ
    window.deleteSite = function(index) {
        if (!confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
        
        const sites = JSON.parse(localStorage.getItem('aiSites') || '[]');
        sites.splice(index, 1);
        localStorage.setItem('aiSites', JSON.stringify(sites));
        
        showMySites();
        alert('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
    };
    
    // ì—…ì¢… í…ìŠ¤íŠ¸ ë³€í™˜
    window.getIndustryText = function(industry) {
        const industries = {
            food: 'ìŒì‹ì ',
            retail: 'ì†Œë§¤ì—…',
            service: 'ì„œë¹„ìŠ¤ì—…',
            manufacturing: 'ì œì¡°ì—…',
            education: 'êµìœ¡',
            medical: 'ì˜ë£Œ',
            finance: 'ê¸ˆìœµ',
            transport: 'ìš´ì†¡',
            government: 'ê´€ê³µì„œ',
            other: 'ê¸°íƒ€'
        };
        return industries[industry] || industry;
    };
})();
</script>
